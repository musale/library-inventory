<html>

<head></head>

<body>
    <form onsubmit="return false;" id="search-form">
        <input name="search" />
        <input type="submit" value="Search" onclick="submitSearch()" />
    </form>

    <br />
    <br />

    <table width="100%">
        <thead>
            <tr>
                <th width="40%">Title</th>
                <th width="30%">Author</th>
                <th width="10%">Year</th>
                <th width="20%">ID</th>
            </tr>
        </thead>
        <tbody id="search-results">
        </tbody>
    </table>

    <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script type="text/javascript">
        function submitSearch() {
            $.ajax({
                url: "/search",
                method: "POST",
                data: $("#search-form").serialize(),
                success: function (results) {
                    const parsed = JSON.parse(results);
                    const searchResults = $("#search-results");
                    searchResults.empty();
                    for (let i = 0; i < parsed.length; ++i) {
                        const result = parsed[i];
                        const tr = document.createElement("tr");

                        const tdt = document.createElement("td");
                        const tda = document.createElement("td");
                        const tdy = document.createElement("td");
                        const tdi = document.createElement("td");

                        const title = document.createTextNode(result.Title)
                        const author = document.createTextNode(result.Author)
                        const year = document.createTextNode(result.Year)
                        const id = document.createTextNode(result.ID)

                        tdt.append(title)
                        tda.append(author)
                        tdy.append(year)
                        tdi.append(id)

                        tr.append(tdt)
                        tr.append(tda)
                        tr.append(tdy)
                        tr.append(tdi)

                        searchResults.append(tr);
                    }
                }
            });
            return false;
        };
    </script>
</body>

</html>